<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Nibras - Arabic Writing Sliding Puzzle</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Balsamiq+Sans:wght@700&family=Fredoka+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Lateef&family=Reem+Kufi&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
            border: 8px solid #ff6b6b;
        }

        .original-title {
            text-align: center;
            margin-bottom: 5px;
        }

        .original-title .arabic-name {
            font-family: 'Reem Kufi', sans-serif;
            font-size: 2.8em;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .original-title .english-name {
            font-family: 'Fredoka One', cursive;
            font-size: 1.2em;
            color: #7f8c8d;
            margin-top: -5px;
        }

        /* English Font Styles */
        .english {
            font-family: 'Comic Neue', cursive;
        }

        .english h1 {
            font-family: 'Fredoka One', cursive;
        }

        .english .subtitle {
            font-family: 'Balsamiq Sans', cursive;
        }

        .english .instructions h3 {
            font-family: 'Fredoka One', cursive;
        }

        .english .stat {
            font-family: 'Balsamiq Sans', cursive;
        }

        .english button {
            font-family: 'Fredoka One', cursive;
        }

        .english .current-challenge {
            font-family: 'Balsamiq Sans', cursive;
        }

        .english .educational-purpose h3 {
            font-family: 'Fredoka One', cursive;
        }

        .english .important-points h3 {
            font-family: 'Fredoka One', cursive;
        }

        /* Arabic Font Styles */
        .arabic {
            font-family: 'Lateef', serif;
            direction: rtl;
        }

        .arabic h1 {
            font-family: 'Reem Kufi', sans-serif;
            font-size: 3.2em;
        }

        .arabic .subtitle {
            font-family: 'Amiri', serif;
            font-size: 1.6em;
        }

        .arabic .instructions h3 {
            font-family: 'Reem Kufi', sans-serif;
            font-size: 2em;
        }

        .arabic .instructions ul {
            font-size: 1.4em;
            line-height: 2.2;
        }

        .arabic .stat {
            font-family: 'Amiri', serif;
            font-size: 1.2em;
        }

        .arabic button {
            font-family: 'Reem Kufi', sans-serif;
            font-size: 1.1em;
        }

        .arabic .current-challenge {
            font-family: 'Amiri', serif;
            font-size: 1.5em;
        }

        .arabic .educational-purpose h3 {
            font-family: 'Reem Kufi', sans-serif;
            font-size: 2em;
        }

        .arabic .educational-purpose p {
            font-size: 1.3em;
            line-height: 1.8;
        }

        .arabic .writing-area {
            font-size: 1.2em;
        }

        .arabic .important-points h3 {
            font-family: 'Reem Kufi', sans-serif;
            font-size: 2em;
        }

        .arabic .important-points ul {
            font-size: 1.3em;
            line-height: 2.0;
            text-align: right;
            padding-right: 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.8em;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.1);
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.4em;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .instructions {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            border: 4px dashed #e17055;
            padding: 25px;
            margin-bottom: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.8em;
            text-align: center;
            background: linear-gradient(45deg, #e84393, #0984e3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .instructions ul {
            list-style-position: inside;
            line-height: 1.8;
            font-size: 1.2em;
        }

        .instructions li {
            margin-bottom: 10px;
            padding-left: 10px;
            font-weight: bold;
        }

        .instructions li:nth-child(1) { color: #e84393; }
        .instructions li:nth-child(2) { color: #0984e3; }
        .instructions li:nth-child(3) { color: #00b894; }
        .instructions li:nth-child(4) { color: #6c5ce7; }
        .instructions li:nth-child(5) { color: #636e72; }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff, #a29bfe);
            border-radius: 15px;
            border: 4px solid #6c5ce7;
        }

        .stats {
            display: flex;
            gap: 20px;
        }

        .stat {
            background: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-size: 1.1em;
            border: 3px solid;
        }

        .stat:nth-child(1) {
            border-color: #ff6b6b;
            color: #ff6b6b;
        }

        .stat:nth-child(2) {
            border-color: #4ecdc4;
            color: #4ecdc4;
        }

        .stat:nth-child(3) {
            border-color: #fdcb6e;
            color: #fdcb6e;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 25px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 6px 0 rgba(0,0,0,0.2);
            position: relative;
            top: 0;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.2);
        }

        #shuffleBtn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
            color: white;
            border: 3px solid #ff4757;
        }

        #resetBtn {
            background: linear-gradient(45deg, #74B9FF, #0984E3);
            color: white;
            border: 3px solid #0984e3;
        }

        #flipBtn {
            background: linear-gradient(45deg, #A29BFE, #6C5CE7);
            color: white;
            border: 3px solid #6c5ce7;
        }

        #nextChallenge {
            background: linear-gradient(45deg, #00B894, #55EFC4);
            color: white;
            border: 3px solid #00b894;
        }

        #soundToggle {
            background: linear-gradient(45deg, #FDCB6E, #FFEAA7);
            color: #2d3436;
            border: 3px solid #fdcb6e;
        }

        #languageToggle {
            background: linear-gradient(45deg, #FF9FF3, #F368E0);
            color: white;
            border: 3px solid #F368E0;
        }

        #colorToggle {
            background: linear-gradient(45deg, #FF9F1C, #FFBF69);
            color: white;
            border: 3px solid #FF9F1C;
        }

        #timerToggle {
            background: linear-gradient(45deg, #00cec9, #81ecec);
            color: white;
            border: 3px solid #00cec9;
        }

        .puzzle-area {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            align-items: flex-start;
        }

        .puzzle-container {
            position: relative;
        }

        .puzzle-board {
            display: grid;
            grid-template-columns: repeat(5, 70px);
            grid-template-rows: repeat(9, 70px);
            gap: 4px;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            padding: 10px;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            transition: transform 0.6s ease;
            border: 6px solid #ff9ff3;
        }

        .puzzle-board.flipped {
            transform: rotateY(180deg);
        }

        .reference-side {
            display: none;
            grid-template-columns: repeat(5, 70px);
            grid-template-rows: repeat(7, 70px);
            gap: 4px;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            padding: 10px;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            position: absolute;
            top: 70px;
            left: 0;
            width: 100%;
            height: calc(7 * 70px + 20px);
            transform: rotateY(180deg);
            backface-visibility: hidden;
            border: 6px solid #74b9ff;
        }

        .puzzle-board.flipped .reference-side {
            display: grid;
        }

        .puzzle-board.flipped .tile {
            visibility: hidden;
        }

        .tile {
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
            font-weight: bold;
            position: relative;
            backface-visibility: hidden;
            border: 3px solid;
        }

        .tile:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            z-index: 10;
        }

        .hidden-tile {
            opacity: 0.3;
        }

        .bright-green {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border-color: #219652;
        }

        .bright-blue {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-color: #21618c;
        }

        .bright-purple {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            border-color: #6c3483;
        }

        .bright-orange {
            background: linear-gradient(135deg, #e67e22, #d35400);
            border-color: #a04000;
        }

        .bright-pink {
            background: linear-gradient(135deg, #e84393, #fd79a8);
            border-color: #e84393;
        }

        .white-tile {
            background: linear-gradient(135deg, #ffffff, #f5f6fa);
            border-color: #e0e0e0;
        }

        .empty {
            background: transparent;
            border: 3px dashed #7f8c8d;
            cursor: default;
        }

        .empty:hover {
            transform: none;
            box-shadow: none;
        }

        .reference-cell {
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            border: 3px solid #e17055;
            font-size: 28px;
            font-weight: bold;
            color: #2d3436;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }

        .english .reference-cell {
            font-family: 'Fredoka One', cursive;
        }

        .arabic .reference-cell {
            font-family: 'Reem Kufi', sans-serif;
        }

        .reference-label {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            border: 3px solid #ff4757;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        .english .reference-label {
            font-family: 'Fredoka One', cursive;
        }

        .arabic .reference-label {
            font-family: 'Reem Kufi', sans-serif;
        }

        .challenge-info {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 4px solid #fdcb6e;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .challenge-info h4 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.6em;
            text-align: center;
            background: linear-gradient(45deg, #e84393, #0984e3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .current-challenge {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 12px;
            border: 3px dashed #74b9ff;
        }

        .writing-area {
            margin-top: 15px;
            text-align: center;
            color: #7f8c8d;
            font-size: 1.1em;
            font-weight: bold;
            background: linear-gradient(45deg, #74b9ff, #a29bfe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .educational-purpose {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            border: 4px dashed #bdc3c7;
        }

        .educational-purpose h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.8em;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .educational-purpose p {
            font-size: 1.2em;
            line-height: 1.6;
            color: #666;
        }

        .important-points {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-radius: 15px;
            border: 4px dashed #28a745;
        }

        .important-points h3 {
            color: #155724;
            margin-bottom: 20px;
            font-size: 1.8em;
            background: linear-gradient(45deg, #28a745, #20c997);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .important-points ul {
            list-style-position: inside;
            line-height: 1.8;
            font-size: 1.1em;
            color: #155724;
            text-align: left;
        }

        .important-points li {
            margin-bottom: 12px;
            padding-left: 10px;
            font-weight: bold;
        }

        .copyright {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #dfe6e9, #b2bec3);
            border-radius: 15px;
            border: 3px solid #636e72;
            font-size: 0.9em;
            color: #2d3436;
        }

        .copyright .english {
            font-family: 'Comic Neue', cursive;
            margin-bottom: 10px;
        }

        .copyright .arabic {
            font-family: 'Lateef', serif;
            direction: rtl;
            font-size: 1.1em;
        }

        .color-key {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            font-size: 1.1em;
            flex-wrap: wrap;
        }

        .color-sample {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 8px;
            vertical-align: middle;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .sound-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
            background: #27ae60;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .sound-indicator.muted {
            background: #e74c3c;
        }

        .timer-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
            background: #00cec9;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .timer-indicator.stopped {
            background: #e74c3c;
        }

        .winning-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1000;
            font-size: 2em;
            font-weight: bold;
            border: 6px solid #ff4757;
            animation: celebrate 2s ease-in-out;
        }

        .pattern-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }

        /* Fun animations */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        .bounce {
            animation: bounce 1s;
        }

        @keyframes pulse {
            0% {transform: scale(1);}
            50% {transform: scale(1.05);}
            100% {transform: scale(1);}
        }

        .pulse {
            animation: pulse 0.5s;
        }

        @keyframes celebrate {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        @keyframes confetti {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti 3s ease-in-out forwards;
            z-index: 999;
        }

        @media (max-width: 768px) {
            .puzzle-board {
                grid-template-columns: repeat(5, 50px);
                grid-template-rows: repeat(9, 50px);
            }
            
            .tile {
                width: 50px;
                height: 50px;
            }

            .reference-side {
                grid-template-columns: repeat(5, 50px);
                grid-template-rows: repeat(7, 50px);
                top: 50px;
                height: calc(7 * 50px + 20px);
            }

            .reference-cell {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .game-info {
                flex-direction: column;
                gap: 15px;
            }

            .controls {
                justify-content: center;
            }

            .puzzle-area {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }

            h1 {
                font-size: 2.2em;
            }

            .arabic h1 {
                font-size: 2.5em;
            }

            .original-title .arabic-name {
                font-size: 2.2em;
            }

            .instructions {
                padding: 20px;
            }

            .important-points {
                padding: 20px;
            }

            .important-points ul {
                font-size: 1em;
            }

            .winning-message {
                font-size: 1.5em;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container english" id="mainContainer">
        <!-- Original Arabic Name -->
        <div class="original-title">
            <div class="arabic-name">Ø§Ù„Ù†Ù‘Ø¨Ø±Ø§Ø³</div>
            <div class="english-name">Al-Nibras (The Beacon)</div>
        </div>

        <h1 class="bounce">ğŸ® Arabic Writing Sliding Puzzle ğŸ®</h1>
        <div class="subtitle">5Ã—9 Grid - Learn Arabic Letters & Numerals</div>
        
        <div class="instructions">
            <h3>ğŸŒŸ How to Play: ğŸŒŸ</h3>
            <ul>
                <li>ğŸ¯ Click any tile adjacent to the empty space to slide it</li>
                <li>ğŸ“ Form Arabic letters and numerals in 5Ã—7 grid</li>
                <li>ğŸ”„ Use "Flip Puzzle" to see the reference patterns on the back</li>
                <li>ğŸ† Complete challenges by forming the correct patterns AND moving the empty space to row 1 or 9</li>
                <li>ğŸŒˆ Change tile colors to suit your preferences!</li>
            </ul>
            <div class="color-key">
                <div><span class="color-sample" style="background: #27ae60;"></span> Colored Tiles (16)</div>
                <div><span class="color-sample" style="background: #ffffff;"></span> White Tiles (26)</div>
                <div><span class="color-sample" style="background: #27ae60; opacity: 0.3;"></span> Hidden Colored</div>
                <div><span class="color-sample" style="background: #ffffff; opacity: 0.3;"></span> Hidden White</div>
            </div>
        </div>

        <div class="game-info">
            <div class="stats">
                <div class="stat">
                    <strong>ğŸ¯ Moves:</strong> <span id="moveCounter">0</span>
                </div>
                <div class="stat">
                    <strong>â±ï¸ Time:</strong> <span id="timerDisplay">00:00</span>
                </div>
                <div class="stat">
                    <strong>ğŸ† Challenge:</strong> <span id="challengeCounter">Ø£Ù„Ù (Alif)</span>
                </div>
            </div>
            <div class="controls">
                <button id="shuffleBtn">ğŸ² Shuffle</button>
                <button id="resetBtn">ğŸ”„ Reset</button>
                <button id="flipBtn">ğŸ“– Flip Puzzle</button>
                <button id="nextChallenge">â­ Next Challenge</button>
                <button id="colorToggle">ğŸ¨ Tile Color</button>
                <button id="timerToggle">â±ï¸ Timer: ON <span class="timer-indicator"></span></button>
                <button id="soundToggle">ğŸ”Š Sound: ON <span class="sound-indicator"></span></button>
                <button id="languageToggle">ğŸŒ English / Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
            </div>
        </div>

        <div class="puzzle-area">
            <div class="puzzle-container">
                <div class="puzzle-board" id="puzzleBoard">
                    <!-- Puzzle tiles will be generated by JavaScript -->
                </div>
                <div class="reference-side" id="referenceSide">
                    <!-- Reference patterns will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="challenge-info">
                <h4>ğŸ¯ Current Challenge:</h4>
                <div class="current-challenge" id="currentChallenge">Form the Arabic Letter 1 (Alif)</div>
                <p style="margin-top: 15px; color: #666;">
                    <strong>ğŸ’¡ Tip:</strong> Use the flip button to see the reference pattern on the back of the puzzle, just like the physical version! The empty space must be in row 1 or 9 to complete the challenge.
                </p>
            </div>
        </div>

        <div class="writing-area">
            <strong>ğŸ“– Reading Area:</strong> Middle 5Ã—7 grid (Arabic letters and numerals are read in this clear area)
        </div>

        <div class="educational-purpose">
            <h3>ğŸ“ Educational Purpose</h3>
            <p>This digital version mimics the physical sliding puzzle. Form Arabic letters (Challenge 1-29) and Arabic numerals (challenge 30-39) by sliding tiles, then flip to check against the reference patterns! Perfect for kids learning Arabic letters and numerals! ğŸ‰</p>
            <p style="margin-top: 15px; font-style: italic;">
                <strong>Important Note:</strong> This game is based on the "Standard Script" developed by Professor Abdelmalek Bouhadjera in 1990 for writing Arabic with a detached script. This script takes into account the hamza and short vowel marks (Harakat) and allows for automated processing of the Arabic language.
            </p>
        </div>

        <!-- New Important Points Section -->
        <div class="important-points">
            <h3>ğŸ“š Important Points to Remember:</h3>
            <ul>
                <li>The Arabic alphabet has 29 letters, not 28.</li>
                <li>The number of consonants is 28, including the hamzat al-qata' (Ø¡).</li>
                <li>The number of long vowels is 3 (Ø§, Ùˆ, ÙŠ).</li>
                <li>The number of short vowels is 3 (Fatha, Damma and Ksra).</li>
                <li>The number of semi-vowels is 2 (Ùˆ, ÙŠ).</li>
                <li>The auxiliary symbols for writing script are 3 (Ù‡, Ø©, ÙŠ), and are not part of the alphabet.</li>
                <li>The short vowels are supposed to be part of the alphabet, but they are sometimes not written because Arabic is a derivational language.</li>
                <li>The shaddah (Ù‘) is extremely important because it indicates a doubled letter.</li>
            </ul>
        </div>

        <!-- Copyright Information -->
        <div class="copyright">
            <div class="english">
                Â© 1992 Original Game Design by Professor Abdelmalek Bouhadjera<br>
                Digital Version Â© 2024 - All Rights Reserved
            </div>
            <div class="arabic">
                Â© 1992 Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ù„Ø£Ø³ØªØ§Ø° Ø§Ù„Ø¯ÙƒØªÙˆØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø¨ÙˆØ­Ø¬Ø±Ø©<br>
                Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Â© 2024 - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
            </div>
        </div>
    </div>

    <script>
        // Character Patterns Lookup Table
        const characterPatterns = {
            // Arabic Letters (1-29)
            1: { // Alif - Ø§
                pattern: [
                    [0,0,1,0,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0]
                ],
                name: { english: "Letter 1 (Alif)", arabic: "Ø§Ù„Ø­Ø±Ù 1 (Ø£Ù„Ù)" },
                character: "Ø§",
                displayName: { english: "Ø£Ù„Ù (Alif)", arabic: "Ø£Ù„Ù" }
            },
            2: { // Ba - Ø¨
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1],
                    [0,0,0,0,0],
                    [0,0,1,0,0]
                ],
                name: { english: "Letter 2 (Baa)", arabic: "Ø§Ù„Ø­Ø±Ù 2 (Ø¨Ø§Ø¡)" },
                character: "Ø¨",
                displayName: { english: "Ø¨Ø§Ø¡ (Baa)", arabic: "Ø¨Ø§Ø¡" }
            },
            3: { // Ta - Øª
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,0,1,0],
                    [0,0,0,0,0],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 3 (Taa)", arabic: "Ø§Ù„Ø­Ø±Ù 3 (ØªØ§Ø¡)" },
                character: "Øª",
                displayName: { english: "ØªØ§Ø¡ (Taa)", arabic: "ØªØ§Ø¡" }
            },
            4: { // Tha - Ø«
                pattern: [
                    [0,0,0,0,0],
                    [0,0,1,0,0],
                    [0,1,0,1,0],
                    [0,0,0,0,0],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 4 (Thaa)", arabic: "Ø§Ù„Ø­Ø±Ù 4 (Ø«Ø§Ø¡)" },
                character: "Ø«",
                displayName: { english: "Ø«Ø§Ø¡ (Thaa)", arabic: "Ø«Ø§Ø¡" }
            },
            5: { // Jeem - Ø¬ÙŠÙ…
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,1,1,1],
                    [0,0,0,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,1,1,0,1]
                ],
                name: { english: "Letter 5 (Jeem)", arabic: "Ø§Ù„Ø­Ø±Ù 5 (Ø¬ÙŠÙ…)" },
                character: "Ø¬ÙŠÙ…",
                displayName: { english: "Ø¬ÙŠÙ… (Jeem)", arabic: "Ø¬ÙŠÙ…" }
            },
            6: { // Haa - Ø­Ø§Ø¡
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,1,1,1],
                    [0,0,0,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 6 (Haa)", arabic: "Ø§Ù„Ø­Ø±Ù 6 (Ø­Ø§Ø¡)" },
                character: "Ø­Ø§Ø¡",
                displayName: { english: "Ø­Ø§Ø¡ (Haa)", arabic: "Ø­Ø§Ø¡" }
            },
            7: { // Khaa - Ø®Ø§Ø¡
                pattern: [
                    [0,0,0,1,0],
                    [0,0,0,0,0],
                    [0,0,1,1,1],
                    [0,0,0,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 7 (Khaa)", arabic: "Ø§Ù„Ø­Ø±Ù 7(Ø®Ø§Ø¡)" },
                character: "Ø®Ø§Ø¡",
                displayName: { english: "Ø®Ø§Ø¡ (Khaa)", arabic: "Ø®Ø§Ø¡" }
            },
            8: { // Daal - Ø¯Ø§Ù„
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,0,0,0],
                    [0,1,1,1,1],
                    [0,0,0,0,1],
                    [0,1,1,1,1]
                ],
                name: { english: "Letter 8 (Daal)", arabic: "Ø§Ù„Ø­Ø±Ù 8(Ø¯Ø§Ù„)" },
                character: "Ø¯Ø§Ù„",
                displayName: { english: "Ø¯Ø§Ù„ (Daal)", arabic: "Ø¯Ø§Ù„" }
            },
            9: { // Dhaal - Ø°Ø§Ù„
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,1,0],
                    [0,1,0,0,0],
                    [0,1,1,1,1],
                    [0,0,0,0,1],
                    [0,1,1,1,1]
                ],
                name: { english: "Letter 9 (Dhaal)", arabic: "Ø§Ù„Ø­Ø±Ù 9(Ø°Ø§Ù„)" },
                character: "Ø°Ø§Ù„",
                displayName: { english: "Ø°Ø§Ù„ (Dhaal)", arabic: "Ø°Ø§Ù„" }
            },
            10: { // Raa - Ø±Ø§Ø¡
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 10 (Raa)", arabic: "Ø§Ù„Ø­Ø±Ù 10(Ø±Ø§Ø¡)" },
                character: "Ø±Ø§Ø¡",
                displayName: { english: "Ø±Ø§Ø¡ (Raa)", arabic: "Ø±Ø§Ø¡" }
            },
            11: { // Zay - Ø²Ø§ÙŠ
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,0,1],
                    [0,0,0,0,0],
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 11 (Zay)", arabic: "Ø§Ù„Ø­Ø±Ù 11(Ø²Ø§ÙŠ)" },
                character: "Ø²Ø§ÙŠ",
                displayName: { english: "Ø²Ø§ÙŠ (Zay)", arabic: "Ø²Ø§ÙŠ" }
            },
            12: { // Seen - Ø³ÙŠÙ†
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [1,0,1,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,0,0,0,0]
                ],
                name: { english: "Letter 12 (Seen)", arabic: "Ø§Ù„Ø­Ø±Ù 12(Ø³ÙŠÙ†)" },
                character: "Ø³ÙŠÙ†",
                displayName: { english: "Ø³ÙŠÙ† (Seen)", arabic: "Ø³ÙŠÙ†" }
            },
            13: { // Sheen - Ø´ÙŠÙ†
                pattern: [
                    [0,0,1,0,0],
                    [0,1,0,1,0],
                    [0,0,0,0,0],
                    [1,0,1,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,0,0,0,0]
                ],
                name: { english: "Letter 13 (Sheen)", arabic: "Ø§Ù„Ø­Ø±Ù 13(Ø´ÙŠÙ†)" },
                character: "Ø´ÙŠÙ†",
                displayName: { english: "Ø´ÙŠÙ† (Sheen)", arabic: "Ø´ÙŠÙ†" }
            },
            14: { // Saad - ØµØ§Ø¯
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [1,1,1,1,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,0,0,0,0]
                ],
                name: { english: "Letter 14 (Saad)", arabic: "Ø§Ù„Ø­Ø±Ù 14(ØµØ§Ø¯)" },
                character: "ØµØ§Ø¯",
                displayName: { english: "ØµØ§Ø¯ (Saad)", arabic: "ØµØ§Ø¯" }
            },
            15: { // Daad - Ø¶Ø§Ø¯
                pattern: [
                    [0,0,1,0,0],
                    [0,0,0,0,0],
                    [1,1,1,1,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,0,0,0,0]
                ],
                name: { english: "Letter 15 (Daad)", arabic: "Ø§Ù„Ø­Ø±Ù 15(Ø¶Ø§Ø¯)" },
                character: "Ø¶Ø§Ø¯",
                displayName: { english: "Ø¶Ø§Ø¯ (Daad)", arabic: "Ø¶Ø§Ø¯" }
            },
            16: { // Taa - Ø·Ø§Ø¡
                pattern: [
                    [0,0,0,0,0],
                    [0,1,0,0,0],
                    [0,1,0,0,0],
                    [0,1,0,0,0],
                    [0,1,1,1,1],
                    [0,1,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 16 (Taa)", arabic: "Ø§Ù„Ø­Ø±Ù 16(Ø·Ø§Ø¡)" },
                character: "Ø·Ø§Ø¡",
                displayName: { english: "Ø·Ø§Ø¡ (Taa)", arabic: "Ø·Ø§Ø¡" }
            },
            17: { // Dhaa - Ø¸Ø§Ø¡
                pattern: [
                    [0,0,0,0,0],
                    [0,1,0,0,0],
                    [0,1,0,1,0],
                    [0,1,0,0,0],
                    [0,1,1,1,1],
                    [0,1,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 17 (Dhaa)", arabic: "Ø§Ù„Ø­Ø±Ù 17(Ø¸Ø§Ø¡)" },
                character: "Ø¸Ø§Ø¡",
                displayName: { english: "Ø¸Ø§Ø¡ (Dhaa)", arabic: "Ø¸Ø§Ø¡" }
            },
            18: { // Ayn - Ø¹ÙŠÙ†
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,1,1,1],
                    [0,0,1,0,0],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 18 (Ayn)", arabic: "Ø§Ù„Ø­Ø±Ù 18(Ø¹ÙŠÙ†)" },
                character: "Ø¹ÙŠÙ†",
                displayName: { english: "Ø¹ÙŠÙ† (Ayn)", arabic: "Ø¹ÙŠÙ†" }
            },
            19: { // Ghayn - ØºÙŠÙ†
                pattern: [
                    [0,0,0,1,0],
                    [0,0,0,0,0],
                    [0,0,1,1,1],
                    [0,0,1,0,0],
                    [1,1,1,1,1],
                    [1,0,0,0,0],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 19 (Ghayn)", arabic: "Ø§Ù„Ø­Ø±Ù 19(ØºÙŠÙ†)" },
                character: "ØºÙŠÙ†",
                displayName: { english: "ØºÙŠÙ† (Ghayn)", arabic: "ØºÙŠÙ†" }
            },
            20: { // Faa - ÙØ§Ø¡
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,1,0],
                    [1,0,0,0,0],
                    [1,0,1,1,1],
                    [1,0,1,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 20 (Faa)", arabic: "Ø§Ù„Ø­Ø±Ù 20(ÙØ§Ø¡)" },
                character: "ÙØ§Ø¡",
                displayName: { english: "ÙØ§Ø¡ (Faa)", arabic: "ÙØ§Ø¡" }
            },
            21: { // Qaaf - Ù‚Ø§Ù
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,1,0,1],
                    [1,0,0,0,0],
                    [1,0,1,1,1],
                    [1,0,1,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 21 (Qaaf)", arabic: "Ø§Ù„Ø­Ø±Ù 21(Ù‚Ø§Ù)" },
                character: "Ù‚Ø§Ù",
                displayName: { english: "Ù‚Ø§Ù (Qaaf)", arabic: "Ù‚Ø§Ù" }
            },
            22: { // Kaaf - ÙƒØ§Ù
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,1],
                    [0,1,0,0,0],
                    [0,1,1,1,1],
                    [0,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 22 (Kaaf)", arabic: "Ø§Ù„Ø­Ø±Ù 22(ÙƒØ§Ù)" },
                character: "ÙƒØ§Ù",
                displayName: { english: "ÙƒØ§Ù (Kaaf)", arabic: "ÙƒØ§Ù" }
            },
            23: { // Laam - Ù„Ø§Ù…
                pattern: [
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [0,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 23 (Laam)", arabic: "Ø§Ù„Ø­Ø±Ù 23(Ù„Ø§Ù…)" },
                character: "Ù„Ø§Ù…",
                displayName: { english: "Ù„Ø§Ù… (Laam)", arabic: "Ù„Ø§Ù…" }
            },
            24: { // Meem - Ù…ÙŠÙ…
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,1,1,1],
                    [1,1,1,0,1],
                    [1,0,1,1,1],
                    [1,0,0,0,0],
                    [1,0,0,0,0]
                ],
                name: { english: "Letter 24 (Meem)", arabic: "Ø§Ù„Ø­Ø±Ù 24(Ù…ÙŠÙ…)" },
                character: "Ù…ÙŠÙ…",
                displayName: { english: "Ù…ÙŠÙ… (Meem)", arabic: "Ù…ÙŠÙ…" }
            },
            25: { // Noon - Ù†ÙˆÙ†
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Letter 25 (Noon)", arabic: "Ø§Ù„Ø­Ø±Ù 25(Ù†ÙˆÙ†)" },
                character: "Ù†ÙˆÙ†",
                displayName: { english: "Ù†ÙˆÙ† (Noon)", arabic: "Ù†ÙˆÙ†" }
            },
            26: { // Haa - Ù‡Ø§Ø¡
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [1,1,1,1,1],
                    [1,0,1,0,1],
                    [1,1,1,1,1],
                    [0,0,1,0,0],
                    [0,0,1,0,0]
                ],
                name: { english: "Letter 26 (Haa)", arabic: "Ø§Ù„Ø­Ø±Ù 26(Ù‡Ø§Ø¡)" },
                character: "Ù‡Ø§Ø¡",
                displayName: { english: "Ù‡Ø§Ø¡ (Haa)", arabic: "Ù‡Ø§Ø¡" }
            },
            27: { // Waw - ÙˆØ§Ùˆ
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,0,1,1,1],
                    [0,0,1,0,1],
                    [0,0,1,1,1],
                    [0,0,0,0,1],
                    [0,1,1,1,1]
                ],
                name: { english: "Letter 27 (Waw)", arabic: "Ø§Ù„Ø­Ø±Ù 27(ÙˆØ§Ùˆ)" },
                character: "ÙˆØ§Ùˆ",
                displayName: { english: "ÙˆØ§Ùˆ (Waw)", arabic: "ÙˆØ§Ùˆ" }
            },
            28: { // Yaa - ÙŠØ§Ø¡
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [1,0,0,1,1],
                    [1,0,0,1,0],
                    [1,1,1,1,0],
                    [0,0,0,0,0],
                    [0,1,0,1,0]
                ],
                name: { english: "Letter 28 (Yaa)", arabic: "Ø§Ù„Ø­Ø±Ù 28(ÙŠØ§Ø¡)" },
                character: "ÙŠØ§Ø¡",
                displayName: { english: "ÙŠØ§Ø¡ (Yaa)", arabic: "ÙŠØ§Ø¡" }
            },
            29: { // Hamza - Ø§Ù„Ù‡Ù…Ø²Ø©
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,0,0],
                    [0,1,1,1,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0]
                ],
                name: { english: "Letter 29 (Hamza)", arabic: "Ø§Ù„Ø­Ø±Ù 29(Ø§Ù„Ù‡Ù…Ø²Ø©)" },
                character: "Ø§Ù„Ù‡Ù…Ø²Ø©",
                displayName: { english: "Ø§Ù„Ù‡Ù…Ø²Ø© (Hamza)", arabic: "Ø§Ù„Ù‡Ù…Ø²Ø©" }
            },
            // Arabic Numerals (30-39)
            30: { // 0
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,1,0],
                    [0,1,0,1,0],
                    [0,1,0,1,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 0", arabic: "Ø§Ù„Ø±Ù‚Ù… 0" },
                character: "0",
                displayName: { english: "ØµÙØ± (Zero)", arabic: "ØµÙØ±" }
            },
            31: { // 1
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,0,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0],
                    [0,0,1,0,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 1", arabic: "Ø§Ù„Ø±Ù‚Ù… 1" },
                character: "1",
                displayName: { english: "ÙˆØ§Ø­Ø¯ (One)", arabic: "ÙˆØ§Ø­Ø¯" }
            },
            32: { // 2
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,0,0,1,0],
                    [0,1,1,1,0],
                    [0,1,0,0,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 2", arabic: "Ø§Ù„Ø±Ù‚Ù… 2" },
                character: "2",
                displayName: { english: "Ø§Ø«Ù†Ø§Ù† (Two)", arabic: "Ø§Ø«Ù†Ø§Ù†" }
            },
            33: { // 3
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,0,0,1,0],
                    [0,0,1,1,0],
                    [0,0,0,1,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 3", arabic: "Ø§Ù„Ø±Ù‚Ù… 3" },
                character: "3",
                displayName: { english: "Ø«Ù„Ø§Ø«Ø© (Three)", arabic: "Ø«Ù„Ø§Ø«Ø©" }
            },
            34: { // 4
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,0,0,0],
                    [0,1,0,1,0],
                    [0,1,1,1,0],
                    [0,0,0,1,0],
                    [0,0,0,1,0]
                ],
                name: { english: "Numeral 4", arabic: "Ø§Ù„Ø±Ù‚Ù… 4" },
                character: "4",
                displayName: { english: "Ø£Ø±Ø¨Ø¹Ø© (Four)", arabic: "Ø£Ø±Ø¨Ø¹Ø©" }
            },
            35: { // 5
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,0,0],
                    [0,1,1,1,0],
                    [0,0,0,1,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 5", arabic: "Ø§Ù„Ø±Ù‚Ù… 5" },
                character: "5",
                displayName: { english: "Ø®Ù…Ø³Ø© (Five)", arabic: "Ø®Ù…Ø³Ø©" }
            },
            36: { // 6
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,1,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 6", arabic: "Ø§Ù„Ø±Ù‚Ù… 6" },
                character: "6",
                displayName: { english: "Ø³ØªØ© (Six)", arabic: "Ø³ØªØ©" }
            },
            37: { // 7
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,1,0],
                    [0,0,0,1,0],
                    [0,0,0,1,0],
                    [0,0,0,1,0]
                ],
                name: { english: "Numeral 7", arabic: "Ø§Ù„Ø±Ù‚Ù… 7" },
                character: "7",
                displayName: { english: "Ø³Ø¨Ø¹Ø© (Seven)", arabic: "Ø³Ø¨Ø¹Ø©" }
            },
            38: { // 8
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,1,0],
                    [0,1,1,1,0],
                    [0,1,0,1,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 8", arabic: "Ø§Ù„Ø±Ù‚Ù… 8" },
                character: "8",
                displayName: { english: "Ø«Ù…Ø§Ù†ÙŠØ© (Eight)", arabic: "Ø«Ù…Ø§Ù†ÙŠØ©" }
            },
            39: { // 9
                pattern: [
                    [0,0,0,0,0],
                    [0,0,0,0,0],
                    [0,1,1,1,0],
                    [0,1,0,1,0],
                    [0,1,1,1,0],
                    [0,0,0,1,0],
                    [0,1,1,1,0]
                ],
                name: { english: "Numeral 9", arabic: "Ø§Ù„Ø±Ù‚Ù… 9" },
                character: "9",
                displayName: { english: "ØªØ³Ø¹Ø© (Nine)", arabic: "ØªØ³Ø¹Ø©" }
            },
            // Default pattern for demonstration
            default: {
                pattern: [
                    [1,1,1,1,1],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,0,0,0,1],
                    [1,1,1,1,1]
                ],
                name: { english: "Demo Pattern", arabic: "Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ" },
                character: "â—¼",
                displayName: { english: "Demo Pattern", arabic: "Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ" }
            }
        };

        // Language content
        const translations = {
            english: {
                originalName: "Al-Nibras (The Beacon)",
                title: "ğŸ® Arabic Writing Sliding Puzzle ğŸ®",
                subtitle: "5Ã—9 Grid - Learn Arabic Letters & Numerals",
                instructions: {
                    title: "ğŸŒŸ How to Play: ğŸŒŸ",
                    items: [
                        "ğŸ¯ Click any tile adjacent to the empty space to slide it",
                        "ğŸ“ Form Arabic letters and numerals in 5Ã—7 grid",
                        "ğŸ”„ Use \"Flip Puzzle\" to see the reference patterns on the back",
                        "ğŸ† Complete challenges by forming the correct patterns AND moving the empty space to row 1 or 9",
                        "ğŸŒˆ Change tile colors to suit your preferences!"
                    ]
                },
                buttons: {
                    shuffle: "ğŸ² Shuffle",
                    reset: "ğŸ”„ Reset",
                    flip: "ğŸ“– Flip Puzzle",
                    nextChallenge: "â­ Next Challenge",
                    colorToggle: "ğŸ¨ Tile Color",
                    timerOn: "â±ï¸ Timer: ON",
                    timerOff: "â±ï¸ Timer: OFF",
                    soundOn: "ğŸ”Š Sound: ON",
                    soundOff: "ğŸ”‡ Sound: OFF",
                    language: "ğŸŒ English / Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
                },
                stats: {
                    moves: "ğŸ¯ Moves:",
                    time: "â±ï¸ Time:",
                    challenge: "ğŸ† Challenge:"
                },
                challenge: {
                    title: "ğŸ¯ Current Challenge:",
                    tip: "ğŸ’¡ Tip: Use the flip button to see the reference pattern on the back of the puzzle, just like the physical version! The empty space must be in row 1 or 9 to complete the challenge."
                },
                writingArea: "ğŸ“– Reading Area: Middle 5Ã—7 grid (Arabic letters and numerals are read in this clear area)",
                educational: {
                    title: "ğŸ“ Educational Purpose",
                    text: "This digital version mimics the physical sliding puzzle. Form Arabic letters (Challenge 1-29) and Arabic numerals (challenge 30-39) by sliding tiles, then flip to check against the reference patterns! Perfect for kids learning Arabic letters and numerals! ğŸ‰",
                    note: "Important Note: This game is based on the \"Standard Script\" developed by Professor Abdelmalek Bouhadjera in 1990 for writing Arabic with a detached script. This script takes into account the hamza and short vowel marks (Harakat) and allows for automated processing of the Arabic language."
                },
                importantPoints: {
                    title: "ğŸ“š Important Points to Remember:",
                    items: [
                        "The Arabic alphabet has 29 letters, not 28.",
                        "The number of consonants is 28, including the hamzat al-qata' (Ø¡).",
                        "The number of long vowels is 3 (Ø§, Ùˆ, ÙŠ).",
                        "The number of short vowels is 3 (Fatha, Damma and Ksra).",
                        "The number of semi-vowels is 2 (Ùˆ, ÙŠ).",
                        "The auxiliary symbols for writing script are 3 (Ù‡, Ø©, ÙŠ), and are not part of the alphabet.",
                        "The short vowels are supposed to be part of the alphabet, but they are sometimes not written because Arabic is a derivational language.",
                        "The shaddah (Ù‘) is extremely important because it indicates a doubled letter."
                    ]
                },
                referenceLabel: "Reference Patterns",
                colorKey: ["Colored Tiles (16)", "White Tiles (26)", "Hidden Colored", "Hidden White"],
                copyright: {
                    english: "Â© 1992 Original Game Design by Professor Abdelmalek Bouhadjera<br>Digital Version Â© 2024 - All Rights Reserved",
                    arabic: "Â© 1992 Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ù„Ø£Ø³ØªØ§Ø° Ø§Ù„Ø¯ÙƒØªÙˆØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø¨ÙˆØ­Ø¬Ø±Ø©<br>Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Â© 2024 - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©"
                },
                winningMessages: [
                    "ğŸ‰ Amazing! You formed the character perfectly! ğŸ‰",
                    "ğŸŒŸ Excellent work! Pattern matched! ğŸŒŸ",
                    "ğŸ† Congratulations! Challenge completed! ğŸ†",
                    "âœ… Perfect! You've mastered this character! âœ…"
                ]
            },
            arabic: {
                originalName: "Ø§Ù„Ù†Ù‘Ø¨Ø±Ø§Ø³ (The Beacon)",
                title: "ğŸ® Ù„ØºØ² Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…Ù†Ø²Ù„Ù‚ ğŸ®",
                subtitle: "Ø´Ø¨ÙƒØ© 5Ã—9 - ØªØ¹Ù„Ù‘Ù… Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                instructions: {
                    title: "ğŸŒŸ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨: ğŸŒŸ",
                    items: [
                        "ğŸ¯ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ù‚Ø·Ø¹Ø© Ù…Ø¬Ø§ÙˆØ±Ø© Ù„Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙØ§Ø±ØºØ© Ù„ØªØ­Ø±ÙŠÙƒÙ‡Ø§",
                        "ğŸ“ Ø´ÙƒÙ‘Ù„ Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© 5Ã—7",
                        "ğŸ”„ Ø§Ø³ØªØ®Ø¯Ù… \"Ù‚Ù„Ø¨ Ø§Ù„Ù„ØºØ²\" Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø¸Ù‡Ø±",
                        "ğŸ† Ø£ÙƒÙ…Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø¨ØªØ´ÙƒÙŠÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„ØµØ­ÙŠØ­Ø© ÙˆÙ†Ù‚Ù„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙØ§Ø±ØºØ© Ø¥Ù„Ù‰ Ø§Ù„ØµÙ 1 Ø£Ùˆ 9",
                        "ğŸŒˆ ØºÙŠÙ‘Ø± Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù‚Ø·Ø¹ Ù„ØªØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø°ÙˆÙ‚Ùƒ!"
                    ]
                },
                buttons: {
                    shuffle: "ğŸ² Ø®Ù„Ø·",
                    reset: "ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø©",
                    flip: "ğŸ“– Ù‚Ù„Ø¨ Ø§Ù„Ù„ØºØ²",
                    nextChallenge: "â­ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„ØªØ§Ù„ÙŠ",
                    colorToggle: "ğŸ¨ Ù„ÙˆÙ† Ø§Ù„Ù‚Ø·Ø¹",
                    timerOn: "â±ï¸ Ø§Ù„Ù…Ø¤Ù‚Øª: ØªØ´ØºÙŠÙ„",
                    timerOff: "â±ï¸ Ø§Ù„Ù…Ø¤Ù‚Øª: Ø¥ÙŠÙ‚Ø§Ù",
                    soundOn: "ğŸ”Š Ø§Ù„ØµÙˆØª: ØªØ´ØºÙŠÙ„",
                    soundOff: "ğŸ”‡ Ø§Ù„ØµÙˆØª: Ø¥ÙŠÙ‚Ø§Ù",
                    language: "ğŸŒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© / English"
                },
                stats: {
                    moves: "ğŸ¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª:",
                    time: "â±ï¸ Ø§Ù„ÙˆÙ‚Øª:",
                    challenge: "ğŸ† Ø§Ù„ØªØ­Ø¯ÙŠ:"
                },
                challenge: {
                    title: "ğŸ¯ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ:",
                    tip: "ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± Ø§Ù„Ù‚Ù„Ø¨ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ Ø¹Ù„Ù‰ Ø¸Ù‡Ø± Ø§Ù„Ù„ØºØ²ØŒ ØªÙ…Ø§Ù…Ø§Ù‹ Ù…Ø«Ù„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø§Ø¯ÙŠØ©! ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙØ§Ø±ØºØ© ÙÙŠ Ø§Ù„ØµÙ 1 Ø£Ùˆ 9 Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ."
                },
                writingArea: "ğŸ“– Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©: Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„ÙˆØ³Ø·Ù‰ 5Ã—7 (ØªÙÙ‚Ø±Ø£ Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙˆØ§Ø¶Ø­Ø©)",
                educational: {
                    title: "ğŸ“ Ø§Ù„ØºØ±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ",
                    text: "Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ØªØ­Ø§ÙƒÙŠ Ø§Ù„Ù„ØºØ² Ø§Ù„Ù…Ù†Ø²Ù„Ù‚ Ø§Ù„Ù…Ø§Ø¯ÙŠ. Ø´ÙƒÙ‘Ù„ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„ØªØ­Ø¯ÙŠ 1-29) ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„ØªØ­Ø¯ÙŠ 30-39) Ø¨ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù‚Ø·Ø¹ØŒ Ø«Ù… Ø§Ù‚Ù„Ø¨ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©! Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ø°ÙŠÙ† ÙŠØªØ¹Ù„Ù…ÙˆÙ† Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©! ğŸ‰",
                    note: "Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ø§Ù…Ø©: Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ \"Ø§Ù„Ø®Ø· Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ\" Ø§Ù„Ø°ÙŠ Ø·ÙˆØ±Ù‡ Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø¨ÙˆØ­Ø¬Ø±Ø© ÙÙŠ Ø¹Ø§Ù… 1990 Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø®Ø· Ù…Ù†ÙØµÙ„. ÙŠØ£Ø®Ø° Ù‡Ø°Ø§ Ø§Ù„Ø®Ø· ÙÙŠ Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø± Ø§Ù„Ù‡Ù…Ø²Ø© ÙˆØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ´ÙƒÙŠÙ„ (Ø§Ù„Ø­Ø±ÙƒØ§Øª) ÙˆÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¢Ù„ÙŠØ© Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©."
                },
                importantPoints: {
                    title: "ğŸ“š Ù†Ù‚Ø§Ø· Ù…Ù‡Ù…Ø© ÙŠØ¬Ø¨ ØªØ°ÙƒØ±Ù‡Ø§:",
                    items: [
                        "Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 29 Ø­Ø±ÙØ§Ù‹ØŒ ÙˆÙ„ÙŠØ³ 28.",
                        "Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ù‡Ùˆ 28ØŒ Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ Ù‡Ù…Ø²Ø© Ø§Ù„Ù‚Ø·Ø¹ (Ø¡).",
                        "Ø¹Ø¯Ø¯ Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ø¯ (Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø·ÙˆÙŠÙ„Ø©) Ù‡Ùˆ 3 (Ø§, Ùˆ, ÙŠ).",
                        "Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù‚ØµÙŠØ±Ø© Ù‡Ùˆ 3 (Ø§Ù„ÙØªØ­Ø©ØŒ Ø§Ù„Ø¶Ù…Ø©ØŒ ÙˆØ§Ù„ÙƒØ³Ø±Ø©).",
                        "Ø¹Ø¯Ø¯ Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ù„Ø© Ø´Ø¨Ù‡ Ø§Ù„ØµÙˆØªÙŠØ© Ù‡Ùˆ 2 (Ùˆ, ÙŠ).",
                        "Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ÙƒØªØ§Ø¨Ø© Ù‡ÙŠ 3 (Ù‡, Ø©, ÙŠ)ØŒ ÙˆÙ‡ÙŠ Ù„ÙŠØ³Øª Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ©.",
                        "Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù‚ØµÙŠØ±Ø© Ù…Ù† Ø§Ù„Ù…ÙØªØ±Ø¶ Ø£Ù† ØªÙƒÙˆÙ† Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ©ØŒ Ù„ÙƒÙ†Ù‡Ø§ Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ù„Ø§ ØªÙÙƒØªØ¨ Ù„Ø£Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„ØºØ© Ø§Ø´ØªÙ‚Ø§Ù‚ÙŠØ©.",
                        "Ø§Ù„Ø´Ø¯Ø© (Ù‘) Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹ Ù„Ø£Ù†Ù‡Ø§ ØªØ´ÙŠØ± Ø¥Ù„Ù‰ Ø­Ø±Ù Ù…Ø¶Ø¹Ù."
                    ]
                },
                referenceLabel: "Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©",
                colorKey: ["Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…Ù„ÙˆÙ†Ø© (16)", "Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ (26)", "Ø§Ù„Ù…Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ÙÙŠ", "Ø§Ù„Ø£Ø¨ÙŠØ¶ Ø§Ù„Ù…Ø®ÙÙŠ"],
                copyright: {
                    english: "Â© 1992 Original Game Design by Professor Abdelmalek Bouhadjera<br>Digital Version Â© 2024 - All Rights Reserved",
                    arabic: "Â© 1992 Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ù„Ø£Ø³ØªØ§Ø° Ø§Ù„Ø¯ÙƒØªÙˆØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø¨ÙˆØ­Ø¬Ø±Ø©<br>Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Â© 2024 - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©"
                },
                winningMessages: [
                    "ğŸ‰ Ù…Ø°Ù‡Ù„! Ù„Ù‚Ø¯ Ø´ÙƒÙ„Øª Ø§Ù„Ø­Ø±Ù Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ! ğŸ‰",
                    "ğŸŒŸ Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹! Ø§Ù„Ù†Ù…Ø· Ù…ØªØ·Ø§Ø¨Ù‚! ğŸŒŸ",
                    "ğŸ† ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ! ğŸ†",
                    "âœ… Ù…Ù…ØªØ§Ø²! Ù„Ù‚Ø¯ Ø£ØªÙ‚Ù†Øª Ù‡Ø°Ø§ Ø§Ù„Ø­Ø±Ù! âœ…"
                ]
            }
        };

        class SoundManager {
            constructor() {
                this.enabled = true;
                console.log('SoundManager initialized');
            }

            createSlideSound() {
                try {
                    const context = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = context.createOscillator();
                    const gainNode = context.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(context.destination);
                    
                    oscillator.frequency.setValueAtTime(200, context.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(100, context.currentTime + 0.1);
                    
                    gainNode.gain.setValueAtTime(0.3, context.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.1);
                    
                    oscillator.start(context.currentTime);
                    oscillator.stop(context.currentTime + 0.1);
                } catch (e) {
                    console.log('Sound error:', e);
                }
            }

            createClickSound() {
                try {
                    const context = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = context.createOscillator();
                    const gainNode = context.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(context.destination);
                    
                    oscillator.frequency.setValueAtTime(800, context.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(200, context.currentTime + 0.05);
                    
                    gainNode.gain.setValueAtTime(0.3, context.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.05);
                    
                    oscillator.start(context.currentTime);
                    oscillator.stop(context.currentTime + 0.05);
                } catch (e) {
                    console.log('Sound error:', e);
                }
            }

            createWinSound() {
                try {
                    const context = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = context.createOscillator();
                    const gainNode = context.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(context.destination);
                    
                    // Victory sound - ascending scale
                    oscillator.frequency.setValueAtTime(262, context.currentTime); // C4
                    oscillator.frequency.setValueAtTime(330, context.currentTime + 0.1); // E4
                    oscillator.frequency.setValueAtTime(392, context.currentTime + 0.2); // G4
                    oscillator.frequency.setValueAtTime(523, context.currentTime + 0.3); // C5
                    
                    gainNode.gain.setValueAtTime(0.3, context.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.5);
                    
                    oscillator.start(context.currentTime);
                    oscillator.stop(context.currentTime + 0.5);
                } catch (e) {
                    console.log('Sound error:', e);
                }
            }

            play(soundName) {
                if (!this.enabled) return;
                
                try {
                    switch(soundName) {
                        case 'slide':
                            this.createSlideSound();
                            break;
                        case 'click':
                            this.createClickSound();
                            break;
                        case 'win':
                            this.createWinSound();
                            break;
                    }
                } catch (error) {
                    console.log('Sound playback error:', error);
                }
            }

            toggle() {
                this.enabled = !this.enabled;
                const button = document.getElementById('soundToggle');
                
                if (this.enabled) {
                    button.innerHTML = translations[currentLanguage].buttons.soundOn + ' <span class="sound-indicator"></span>';
                    this.play('click');
                } else {
                    button.innerHTML = translations[currentLanguage].buttons.soundOff + ' <span class="sound-indicator muted"></span>';
                }
            }
        }

        class TimerManager {
            constructor() {
                this.enabled = true;
                this.isRunning = false;
                this.startTime = 0;
                this.elapsedTime = 0;
                this.intervalId = null;
                console.log('TimerManager initialized');
            }

            start() {
                if (!this.enabled || this.isRunning) return;
                
                this.isRunning = true;
                this.startTime = Date.now() - this.elapsedTime;
                this.intervalId = setInterval(() => {
                    this.updateDisplay();
                }, 1000);
                
                this.updateButton();
            }

            stop() {
                if (!this.isRunning) return;
                
                this.isRunning = false;
                this.elapsedTime = Date.now() - this.startTime;
                clearInterval(this.intervalId);
                this.updateButton();
            }

            reset() {
                this.stop();
                this.elapsedTime = 0;
                this.updateDisplay();
            }

            updateDisplay() {
                if (!this.isRunning) return;
                
                this.elapsedTime = Date.now() - this.startTime;
                const seconds = Math.floor(this.elapsedTime / 1000);
                const minutes = Math.floor(seconds / 60);
                const displaySeconds = seconds % 60;
                
                document.getElementById('timerDisplay').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${displaySeconds.toString().padStart(2, '0')}`;
            }

            toggle() {
                this.enabled = !this.enabled;
                if (!this.enabled) {
                    this.stop();
                }
                this.updateButton();
            }

            updateButton() {
                const button = document.getElementById('timerToggle');
                const indicator = button.querySelector('.timer-indicator');
                
                if (this.enabled) {
                    button.innerHTML = translations[currentLanguage].buttons.timerOn + ' <span class="timer-indicator"></span>';
                    if (this.isRunning) {
                        indicator.style.background = '#00cec9';
                    } else {
                        indicator.style.background = '#fdcb6e';
                    }
                } else {
                    button.innerHTML = translations[currentLanguage].buttons.timerOff + ' <span class="timer-indicator stopped"></span>';
                }
            }

            getFormattedTime() {
                const seconds = Math.floor(this.elapsedTime / 1000);
                const minutes = Math.floor(seconds / 60);
                const displaySeconds = seconds % 60;
                return `${minutes.toString().padStart(2, '0')}:${displaySeconds.toString().padStart(2, '0')}`;
            }
        }

        let currentLanguage = 'english';

        class SlidingPuzzle {
            constructor() {
                console.log('SlidingPuzzle constructor called');
                this.rows = 9;
                this.cols = 5;
                this.board = [];
                this.emptyPos = { row: 4, col: 2 }; // Empty space starts in the middle (row 5, index 4)
                this.moves = 0;
                this.isMoving = false;
                this.isFlipped = false;
                this.soundManager = new SoundManager();
                this.timerManager = new TimerManager();
                this.gameCompleted = false;
                this.firstMoveMade = false;
                
                // Color options for the tiles
                this.colorOptions = [
                    { name: 'Green', class: 'bright-green', sample: '#27ae60' },
                    { name: 'Blue', class: 'bright-blue', sample: '#3498db' },
                    { name: 'Purple', class: 'bright-purple', sample: '#9b59b6' }
                ];
                this.currentColorIndex = 0;
                
                // Challenges
                this.challenges = Object.keys(characterPatterns)
                    .filter(key => key !== 'default')
                    .map(key => ({
                        id: parseInt(key),
                        ...characterPatterns[key]
                    }));
                this.currentChallengeIndex = 0;
                
                this.resetToCheckerboard(); // Start with checkerboard pattern
                this.setupEventListeners();
                this.updateMoveCounter();
                this.updateChallengeDisplay();
                
                console.log('Puzzle initialized successfully');
            }

            get currentChallenge() {
                return this.challenges[this.currentChallengeIndex];
            }

            resetToCheckerboard() {
                this.soundManager.play('click');
                this.moves = 0;
                this.gameCompleted = false;
                this.firstMoveMade = false;
                this.timerManager.reset();
                this.emptyPos = { row: 4, col: 2 }; // Empty space starts in the middle (row 5, index 4)
                this.updateMoveCounter();
                
                // Reset the board with alternating pattern in 5Ã—7 area
                this.board = [];
                
                // Counters to ensure exactly 16 colored tiles
                let coloredCount = 0;
                const maxColored = 16;
                
                // Create checkerboard pattern in the middle 7 rows (reading area)
                for (let row = 0; row < this.rows; row++) {
                    this.board[row] = [];
                    for (let col = 0; col < this.cols; col++) {
                        if (row === this.emptyPos.row && col === this.emptyPos.col) {
                            this.board[row][col] = null; // Empty space in the middle
                        } else if (row >= 1 && row <= 7) {
                            // Middle 7 rows - alternating pattern
                            const isColored = (row + col) % 2 === 0 && coloredCount < maxColored;
                            if (isColored) coloredCount++;
                            
                            this.board[row][col] = {
                                color: isColored ? this.colorOptions[this.currentColorIndex].class : 'white-tile',
                                isColored: isColored
                            };
                        } else {
                            // Top and bottom rows - white tiles
                            this.board[row][col] = {
                                color: 'white-tile',
                                isColored: false
                            };
                        }
                    }
                }
                
                // Ensure we have exactly 16 colored tiles by adjusting if needed
                if (coloredCount < maxColored) {
                    this.adjustColoredTiles(coloredCount, maxColored);
                }
                
                this.renderBoard();
            }

            adjustColoredTiles(currentCount, targetCount) {
                // Add more colored tiles if needed
                let needed = targetCount - currentCount;
                if (needed <= 0) return;
                
                // Find white tiles in the middle area that can be converted to colored
                const whitePositions = [];
                for (let row = 1; row <= 7; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        if (this.board[row][col] && !this.board[row][col].isColored) {
                            whitePositions.push({ row, col });
                        }
                    }
                }
                
                // Randomly select white tiles to convert to colored
                whitePositions.sort(() => Math.random() - 0.5);
                for (let i = 0; i < Math.min(needed, whitePositions.length); i++) {
                    const pos = whitePositions[i];
                    this.board[pos.row][pos.col] = {
                        color: this.colorOptions[this.currentColorIndex].class,
                        isColored: true
                    };
                }
            }

            renderBoard() {
                const boardElement = document.getElementById('puzzleBoard');
                if (!boardElement) {
                    console.error('Puzzle board element not found!');
                    return;
                }
                
                boardElement.innerHTML = '';

                for (let row = 0; row < this.rows; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        const tile = this.board[row][col];
                        const tileElement = document.createElement('div');
                        
                        if (tile === null) {
                            tileElement.className = 'tile empty';
                        } else {
                            tileElement.className = `tile ${tile.color}`;
                            if (row === 0 || row === 8) {
                                tileElement.classList.add('hidden-tile');
                            }
                            tileElement.addEventListener('click', () => this.handleTileClick(row, col));
                        }
                        
                        tileElement.dataset.row = row;
                        tileElement.dataset.col = col;
                        boardElement.appendChild(tileElement);
                    }
                }

                this.renderReferenceSide();
            }

            renderReferenceSide() {
                const referenceSide = document.getElementById('referenceSide');
                if (!referenceSide) return;
                
                referenceSide.innerHTML = '';

                // Add reference label
                const label = document.createElement('div');
                label.className = 'reference-label';
                label.textContent = translations[currentLanguage].referenceLabel;
                referenceSide.appendChild(label);

                // Get current pattern or use default
                const pattern = this.currentChallenge?.pattern || characterPatterns.default.pattern;
                
                // Add reference cells with pattern
                for (let row = 0; row < 7; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'reference-cell';
                        
                        if (pattern[row] && pattern[row][col] === 1) {
                            cell.style.background = 'linear-gradient(135deg, #2d3436, #636e72)';
                            cell.style.color = 'white';
                            cell.textContent = this.currentChallenge?.character || 'â—¼';
                        }
                        
                        referenceSide.appendChild(cell);
                    }
                }
            }

            handleTileClick(row, col) {
                if (this.isMoving || this.isFlipped || this.gameCompleted) return;
                
                this.soundManager.play('click');
                
                // Start timer on first move
                if (!this.firstMoveMade) {
                    this.firstMoveMade = true;
                    this.timerManager.start();
                }
                
                if (this.canMove(row, col)) {
                    this.moveTile(row, col);
                }
            }

            canMove(row, col) {
                return (Math.abs(row - this.emptyPos.row) === 1 && col === this.emptyPos.col) || 
                       (Math.abs(col - this.emptyPos.col) === 1 && row === this.emptyPos.row);
            }

            moveTile(row, col) {
                if (this.isMoving) return;

                this.isMoving = true;
                this.soundManager.play('slide');
                
                // Swap tile with empty space
                this.board[this.emptyPos.row][this.emptyPos.col] = this.board[row][col];
                this.board[row][col] = null;
                this.emptyPos = { row, col };
                
                this.moves++;
                this.updateMoveCounter();
                
                setTimeout(() => {
                    this.renderBoard();
                    this.isMoving = false;
                    this.checkPattern();
                }, 150);
            }

            checkPattern() {
                if (this.gameCompleted) return;
                
                const pattern = this.currentChallenge.pattern;
                let patternMatched = true;
                
                // Check only the middle 7 rows (reading area)
                for (let row = 1; row <= 7; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        const tile = this.board[row][col];
                        const shouldBeColored = pattern[row-1][col] === 1;
                        
                        if (shouldBeColored && (!tile || !tile.isColored)) {
                            patternMatched = false;
                            break;
                        } else if (!shouldBeColored && tile && tile.isColored) {
                            patternMatched = false;
                            break;
                        }
                    }
                    if (!patternMatched) break;
                }
                
                // Check if empty space is in row 1 or 9 (hidden rows)
                const emptyInHiddenRow = this.emptyPos.row === 0 || this.emptyPos.row === 8;
                
                if (patternMatched && emptyInHiddenRow) {
                    this.gameCompleted = true;
                    this.timerManager.stop();
                    this.showWinningMessage();
                }
            }

            showWinningMessage() {
                this.soundManager.play('win');
                
                // Create winning message
                const message = document.createElement('div');
                message.className = 'winning-message';
                const messages = translations[currentLanguage].winningMessages;
                message.textContent = messages[Math.floor(Math.random() * messages.length)];
                
                document.body.appendChild(message);
                
                // Create confetti effect
                this.createConfetti();
                
                // Remove message after 9 seconds
                setTimeout(() => {
                    message.remove();
                }, 9000);
            }

            createConfetti() {
                const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => confetti.remove(), 9000);
                }
            }

            shuffle() {
                this.soundManager.play('click');
                this.moves = 0;
                this.updateMoveCounter();
                this.gameCompleted = false;
                this.firstMoveMade = false;
                this.timerManager.reset();
                this.emptyPos = { row: 4, col: 2 }; // Empty space starts in the middle (row 5, index 4)
                
                // Create positions for all tiles (excluding empty space)
                const positions = [];
                for (let row = 0; row < this.rows; row++) {
                    for (let col = 0; col < this.cols; col++) {
                        if (!(row === this.emptyPos.row && col === this.emptyPos.col)) {
                            positions.push({ row, col });
                        }
                    }
                }
                
                // Shuffle positions for colored tiles (16 colored tiles)
                const shuffledPositions = [...positions].sort(() => Math.random() - 0.5);
                const coloredPositions = shuffledPositions.slice(0, 16);
                const whitePositions = shuffledPositions.slice(16);
                
                // Reset board
                this.board = [];
                for (let row = 0; row < this.rows; row++) {
                    this.board[row] = [];
                    for (let col = 0; col < this.cols; col++) {
                        if (row === this.emptyPos.row && col === this.emptyPos.col) {
                            this.board[row][col] = null;
                        } else {
                            this.board[row][col] = null;
                        }
                    }
                }
                
                // Place colored tiles
                coloredPositions.forEach(pos => {
                    this.board[pos.row][pos.col] = {
                        color: this.colorOptions[this.currentColorIndex].class,
                        isColored: true
                    };
                });
                
                // Place white tiles
                whitePositions.forEach(pos => {
                    this.board[pos.row][pos.col] = {
                        color: 'white-tile',
                        isColored: false
                    };
                });
                
                this.renderBoard();
            }

            flipPuzzle() {
                this.soundManager.play('click');
                const board = document.getElementById('puzzleBoard');
                this.isFlipped = !this.isFlipped;
                board.classList.toggle('flipped', this.isFlipped);
                
                const flipBtn = document.getElementById('flipBtn');
                if (this.isFlipped) {
                    flipBtn.textContent = currentLanguage === 'english' ? 'ğŸ“š Show Puzzle' : 'ğŸ“š Ø¹Ø±Ø¶ Ø§Ù„Ù„ØºØ²';
                } else {
                    flipBtn.textContent = currentLanguage === 'english' ? 'ğŸ“– Flip Puzzle' : 'ğŸ“– Ù‚Ù„Ø¨ Ø§Ù„Ù„ØºØ²';
                }
            }

            toggleColor() {
                this.soundManager.play('click');
                this.currentColorIndex = (this.currentColorIndex + 1) % this.colorOptions.length;
                // Reinitialize with current pattern but new color
                this.resetToCheckerboard();
            }

            nextChallenge() {
                this.soundManager.play('click');
                this.currentChallengeIndex = (this.currentChallengeIndex + 1) % this.challenges.length;
                this.moves = 0;
                this.gameCompleted = false;
                this.firstMoveMade = false;
                this.timerManager.reset();
                this.emptyPos = { row: 4, col: 2 }; // Empty space starts in the middle (row 5, index 4)
                this.updateMoveCounter();
                this.updateChallengeDisplay();
                this.resetToCheckerboard();
            }

            updateChallengeDisplay() {
                const challenge = this.currentChallenge;
                const displayText = currentLanguage === 'english' ? 
                    `Form the ${challenge.name.english}` : 
                    `Ø´ÙƒÙ‘Ù„ ${challenge.name.arabic}`;
                
                document.getElementById('currentChallenge').textContent = displayText;
                
                // Update challenge counter with display name
                const challengeCounter = document.getElementById('challengeCounter');
                challengeCounter.textContent = currentLanguage === 'english' ? 
                    challenge.displayName.english : 
                    challenge.displayName.arabic;
            }

            updateMoveCounter() {
                document.getElementById('moveCounter').textContent = this.moves;
            }

            setupEventListeners() {
                // Add basic event listeners
                document.getElementById('shuffleBtn').addEventListener('click', () => this.shuffle());
                document.getElementById('resetBtn').addEventListener('click', () => this.resetToCheckerboard());
                document.getElementById('flipBtn').addEventListener('click', () => this.flipPuzzle());
                document.getElementById('nextChallenge').addEventListener('click', () => this.nextChallenge());
                document.getElementById('colorToggle').addEventListener('click', () => this.toggleColor());
                document.getElementById('timerToggle').addEventListener('click', () => this.timerManager.toggle());
                document.getElementById('soundToggle').addEventListener('click', () => this.soundManager.toggle());
                document.getElementById('languageToggle').addEventListener('click', () => this.toggleLanguage());

                console.log('Event listeners setup complete');
            }

            toggleLanguage() {
                currentLanguage = currentLanguage === 'english' ? 'arabic' : 'english';
                this.soundManager.play('click');
                this.updateInterfaceLanguage();
            }

            updateInterfaceLanguage() {
                const translation = translations[currentLanguage];
                
                // Update main elements
                document.querySelector('h1').textContent = translation.title;
                document.querySelector('.subtitle').textContent = translation.subtitle;
                
                // Update instructions
                const instructions = document.querySelector('.instructions');
                instructions.querySelector('h3').textContent = translation.instructions.title;
                const instructionItems = instructions.querySelectorAll('li');
                translation.instructions.items.forEach((item, index) => {
                    if (instructionItems[index]) {
                        instructionItems[index].textContent = item;
                    }
                });
                
                // Update color key
                const colorKeyItems = document.querySelectorAll('.color-key div');
                translation.colorKey.forEach((text, index) => {
                    if (colorKeyItems[index]) {
                        colorKeyItems[index].textContent = text;
                    }
                });
                
                // Update stats
                document.querySelector('.stat:nth-child(1) strong').textContent = translation.stats.moves;
                document.querySelector('.stat:nth-child(2) strong').textContent = translation.stats.time;
                document.querySelector('.stat:nth-child(3) strong').textContent = translation.stats.challenge;
                
                // Update buttons
                document.getElementById('shuffleBtn').textContent = translation.buttons.shuffle;
                document.getElementById('resetBtn').textContent = translation.buttons.reset;
                document.getElementById('flipBtn').textContent = this.isFlipped ? 
                    (currentLanguage === 'english' ? 'ğŸ“š Show Puzzle' : 'ğŸ“š Ø¹Ø±Ø¶ Ø§Ù„Ù„ØºØ²') : 
                    translation.buttons.flip;
                document.getElementById('nextChallenge').textContent = translation.buttons.nextChallenge;
                document.getElementById('colorToggle').textContent = translation.buttons.colorToggle;
                document.getElementById('timerToggle').innerHTML = this.timerManager.enabled ? 
                    translation.buttons.timerOn + ' <span class="timer-indicator"></span>' : 
                    translation.buttons.timerOff + ' <span class="timer-indicator stopped"></span>';
                document.getElementById('soundToggle').innerHTML = this.soundManager.enabled ? 
                    translation.buttons.soundOn + ' <span class="sound-indicator"></span>' : 
                    translation.buttons.soundOff + ' <span class="sound-indicator muted"></span>';
                document.getElementById('languageToggle').textContent = translation.buttons.language;
                
                // Update challenge info
                document.querySelector('.challenge-info h4').textContent = translation.challenge.title;
                document.querySelector('.challenge-info p strong').textContent = translation.challenge.tip;
                
                // Update writing area
                document.querySelector('.writing-area strong').textContent = translation.writingArea;
                
                // Update educational purpose
                const eduSection = document.querySelector('.educational-purpose');
                eduSection.querySelector('h3').textContent = translation.educational.title;
                const eduParagraphs = eduSection.querySelectorAll('p');
                eduParagraphs[0].textContent = translation.educational.text;
                eduParagraphs[1].innerHTML = `<strong>Important Note:</strong> ${translation.educational.note}`;
                
                // Update important points
                const importantPoints = document.querySelector('.important-points');
                importantPoints.querySelector('h3').textContent = translation.importantPoints.title;
                const importantItems = importantPoints.querySelectorAll('li');
                translation.importantPoints.items.forEach((item, index) => {
                    if (importantItems[index]) {
                        importantItems[index].textContent = item;
                    }
                });
                
                // Update reference label
                document.querySelector('.reference-label').textContent = translation.referenceLabel;
                
                // Update copyright
                document.querySelector('.copyright .english').innerHTML = translation.copyright.english;
                document.querySelector('.copyright .arabic').innerHTML = translation.copyright.arabic;
                
                // Update container class for RTL/LTR
                document.getElementById('mainContainer').className = `container ${currentLanguage}`;
                
                // Update challenge display
                this.updateChallengeDisplay();
                this.renderReferenceSide();
            }
        }

        // Initialize the game when the page loads
        window.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded, initializing game...');
            try {
                new SlidingPuzzle();
                console.log('Game initialized successfully!');
            } catch (error) {
                console.error('Error initializing game:', error);
            }
        });
    </script>
</body>
</html>
